<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.147.8">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/favicon.png" type="image/png">

    <title>Cập nhật Lambda để ghi dữ liệu vào DynamoDB :: Thiết lập AWS Account</title>

    
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/nucleus.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/fontawesome-all.min.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/hybrid.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/featherlight.min.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/perfect-scrollbar.min.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/auto-complete.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/atom-one-dark-reasonable.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/theme.css?1761146003" rel="stylesheet">
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/hugo-theme.css?1761146003" rel="stylesheet">
    
    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/css/theme-workshop.css?1761146003" rel="stylesheet">
    
    

    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/jquery-3.3.1.min.js?1761146003"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/8.2-update-lambda-to-write-dynamodb/">
    <nav id="sidebar" class="showVisitedLinks">

  
  
    <div id="header-wrapper">
      <div id="header">
        <a id="logo" href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

      </div>
      
          <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/lunr.min.js?1761146003"></script>
<script type="text/javascript" src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/auto-complete.js?1761146003"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/baoanh020603.github.io\/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS\/\/vi";
    
</script>
<script type="text/javascript" src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/search.js?1761146003"></script>
      
    </div>
  
      <div class="highlightable">
      <ul class="topics">
  
          
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/1-introduction/" title="Giới thiệu" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/1-introduction/">
            <b>1. </b>Giới thiệu
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/2-check-aws-account-and-permissions/" title="Kiểm tra Tài khoản và Quyền AWS" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/2-check-aws-account-and-permissions/">
            <b>2. </b>Kiểm tra Tài khoản và Quyền AWS
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/3-create-s3-bucket/" title="Tạo Bucket S3 để Lưu trữ Dữ liệu" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/3-create-s3-bucket/">
            <b>3. </b>Tạo Bucket S3 để Lưu trữ Dữ liệu
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
        
          <ul>
            
            
              
            
            
            
          
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/3-create-s3-bucket/3.1-create-an-bucket-to-store-data/" title="Tạo Bucket S3" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/3-create-s3-bucket/3.1-create-an-bucket-to-store-data/">
            <b>3.1 </b>Tạo Bucket S3
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/3-create-s3-bucket/3.2-organize-data-structure/" title="Tổ chức Cấu trúc Dữ liệu" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/3-create-s3-bucket/3.2-organize-data-structure/">
            <b>3.2 </b>Tổ chức Cấu trúc Dữ liệu
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/3-create-s3-bucket/3.3-upload-sample-data/" title="Tải lên dữ liệu mẫu" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/3-create-s3-bucket/3.3-upload-sample-data/">
            <b>3.3 </b>Tải lên dữ liệu mẫu
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
          
          </ul>
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/4-implement-lambda-preprocessing/" title="Triển khai Hàm Xử lý Trước Lambda" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/4-implement-lambda-preprocessing/">
            <b>4. </b>Triển khai Hàm Xử lý Trước Lambda
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/5-train-model-with-sagemaker/" title="Đào tạo và Đăng ký Mô hình với Amazon SageMaker" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/5-train-model-with-sagemaker/">
            <b>5. </b>Đào tạo và Đăng ký Mô hình với Amazon SageMaker
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
        
          <ul>
            
            
              
            
            
            
          
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/5-train-model-with-sagemaker/5.1-prepare-training-data/" title="Chuẩn bị dữ liệu đầu vào cho SageMaker" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/5-train-model-with-sagemaker/5.1-prepare-training-data/">
            <b>5.1 </b>Chuẩn bị dữ liệu đầu vào cho SageMaker
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/5-train-model-with-sagemaker/5.2-create-training-job/" title="Tạo SageMaker Training Job" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/5-train-model-with-sagemaker/5.2-create-training-job/">
            <b>5.2 </b>Tạo SageMaker Training Job
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/5-train-model-with-sagemaker/5.3-register-and-manage-model/" title="Đăng ký và Quản lý Mô hình trong SageMaker Model Registry" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/5-train-model-with-sagemaker/5.3-register-and-manage-model/">
            <b>5.3 </b>Đăng ký và Quản lý Mô hình trong SageMaker Model Registry
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/5-train-model-with-sagemaker/5.4-validate-training-results/" title="Xác thực Kết quả Huấn luyện Mô hình" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/5-train-model-with-sagemaker/5.4-validate-training-results/">
            <b>5.4 </b>Xác thực Kết quả Huấn luyện Mô hình
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
          
          </ul>
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/6-deploy-sagemaker-endpoint/" title="Triển khai Endpoint của SageMaker cho Inference" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/6-deploy-sagemaker-endpoint/">
            <b>6. </b>Triển khai Endpoint của SageMaker cho Inference
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/7-build-lambda-inference-and-api/" title="Xây dựng Lambda Function và REST API cho Inference" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/7-build-lambda-inference-and-api/">
            <b>7. </b>Xây dựng Lambda Function và REST API cho Inference
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/8-integrate-dynamodb-and-cloudwatch/" title="Tích hợp DynamoDB và CloudWatch" class="dd-item 
          parent
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/">
            <b>8 </b>Tích hợp DynamoDB và CloudWatch
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
        
          <ul>
            
            
              
            
            
            
          
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/8-integrate-dynamodb-and-cloudwatch/8.1-create-dynamodb-table/" title="Tạo bảng DynamoDB để lưu metadata inference" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/8.1-create-dynamodb-table/">
            <b>8.1 </b>Tạo bảng DynamoDB để lưu metadata inference
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/8-integrate-dynamodb-and-cloudwatch/8.2-update-lambda-to-write-dynamodb/" title="Cập nhật Lambda để ghi dữ liệu vào DynamoDB" class="dd-item 
          
          active
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/8.2-update-lambda-to-write-dynamodb/">
            <b>8.2 </b>Cập nhật Lambda để ghi dữ liệu vào DynamoDB
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
              
              
  
  
  
  
   
    
      
      <li data-nav-id="/vi/8-integrate-dynamodb-and-cloudwatch/8.3-monitor-with-cloudwatch/" title="Giám sát với Amazon CloudWatch" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/8.3-monitor-with-cloudwatch/">
            <b>8.3 </b>Giám sát với Amazon CloudWatch
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
              
            
          
          </ul>
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/9-clean-up-resources/" title="Dọn dẹp tài nguyên" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/9-clean-up-resources/">
            <b>9. </b>Dọn dẹp tài nguyên
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
            
            
  
  
  
  
   
    
      
      <li data-nav-id="/vi/10-conclusion/" title="Kết luận và những điểm chính" class="dd-item 
          
          
          
          ">
        <a href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/10-conclusion/">
            <b>10. </b>Kết luận và những điểm chính
            
              <i class="fas fa-check read-icon"></i>
            
        </a>
        
                
      </li>
    
   
  
            
           
      </ul>
  
      
      
        <section id="shortcuts">
          <h3>More</h3>
          <ul>
            
                <li> 
                    <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
                </li>
            
          </ul>
        </section>
      
  
      
      <section id="prefooter">
        <hr/>
        <ul>
        
          <li>
            <a class="padding">
              <i class="fas fa-language fa-fw"></i>
            <div class="select-style">
              <select id="select-language" onchange="location = this.value;">
            
            
            
                
                
                    
                      
                      
                        <option id="en" value="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/8-integrate-dynamodb-and-cloudwatch/8.2-update-lambda-to-write-dynamodb/">English</option>
                      
                    
                
                    
                
            
                
                
                    
                
                    
                      
                      
                        <option id="vi" value="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/8.2-update-lambda-to-write-dynamodb/" selected>Tiếng Việt</option>
                      
                    
                
            
          </select>
          <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
            <g>
              <g id="arrow-drop-down">
                <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
              </g>
            </g>
          </svg>
          </div>
          </a>
          </li>
        
        
        
          <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
        
        </ul>
      </section>
      
      <section id="footer">
        <left>
    
    <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830891&style=0038&nbdigits=9&type=page&initCount=0"
        title="Migrate" Alt="web counter" border="0" /></a> <br>
    <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0"
        title="Total CLoud Journey" Alt="web counter" border="0" />

</left>
<left>
    <br>
    <br>
    <b> Last Updated </b> <br>
    <i>
        <font color=orange>29-08-2025</font>
    </i>
</left>
<left>
    <br>
    <br>
    <b> Team </b> <br>

    <i>
        <a href="https://www.linkedin.com/in/bao-anh-nguyen-nhat-7891722a7/" style="color:orange">Nguyễn Nhật Bảo Anh</a>
    </i>
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script>
      </section>
    </div>
  </nav>
  
  
  
        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/'>Hội thảo: Xây dựng quy trình học máy toàn diện trên AWS với Lambda, API Gateway, S3, SageMaker và DynamoDB</a> > <a href='https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/'>Tích hợp DynamoDB và CloudWatch</a> > Cập nhật Lambda để ghi dữ liệu vào DynamoDB
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#-mục-tiêu-của-bước-này">🎯 Mục tiêu của bước này:</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Cập nhật Lambda để ghi dữ liệu vào DynamoDB
            </h1>
          

        



	<p><img src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/8-Configure-CloudFront/8.2-Update-Lambda-to-Write-DynamoDB/8.2.0.png" alt="lambda-dynamodb.png"></p>
<p>Trong phần này, chúng ta sẽ:</p>
<ul>
<li>Cập nhật hàm Lambda inference để ghi metadata mỗi lần gọi mô hình vào DynamoDB.</li>
<li>Kiểm tra dữ liệu được ghi thành công.</li>
<li>Xác minh quá trình inference được theo dõi đầy đủ.</li>
</ul>
<hr>
<h3 id="-mục-tiêu-của-bước-này">🎯 Mục tiêu của bước này:</h3>
<ul>
<li><strong>Lưu trữ lịch sử inference</strong>: Ghi lại dữ liệu đầu vào, kết quả, thời gian xử lý và thông tin mô hình.</li>
<li><strong>Phân tích &amp; Debug dễ dàng</strong>: Dữ liệu được lưu giúp theo dõi hành vi mô hình theo thời gian.</li>
<li><strong>Tích hợp với giám sát</strong>: Chuẩn bị cho bước kết nối với CloudWatch để theo dõi pipeline.</li>
</ul>
<hr>
<h4 id="-cập-nhật-lambda-để-ghi-dữ-liệu-vào-dynamodb">🛠️ Cập nhật Lambda để ghi dữ liệu vào DynamoDB</h4>
<ol>
<li><strong>Mở Lambda Function Inference</strong>
<ul>
<li>Truy cập <strong>AWS Lambda</strong> trong Management Console.</li>
<li>Chọn hàm Lambda bạn đã tạo để gọi <strong>SageMaker Endpoint</strong> (ví dụ: <code>ml-inference-lambda</code>).</li>
</ul>
</li>
</ol>
<p><img src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/8-Configure-CloudFront/8.2-Update-Lambda-to-Write-DynamoDB/8.2.1.png" alt="lambda-dynamodb.png">
<img src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/8-Configure-CloudFront/8.2-Update-Lambda-to-Write-DynamoDB/8.2.3.png" alt="lambda-dynamodb.png"></p>
<hr>
<ol start="2">
<li><strong>Cập nhật mã nguồn Lambda</strong></li>
</ol>
<p>Thay nội dung file <code>lambda_function.py</code> bằng mã dưới đây để ghi metadata vào bảng <strong>InferenceMetadata</strong> sau mỗi lần inference:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> boto3
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> uuid
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sagemaker <span style="color:#f92672">=</span> boto3<span style="color:#f92672">.</span>client(<span style="color:#e6db74">&#39;sagemaker-runtime&#39;</span>)
</span></span><span style="display:flex;"><span>dynamodb <span style="color:#f92672">=</span> boto3<span style="color:#f92672">.</span>client(<span style="color:#e6db74">&#39;dynamodb&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ENDPOINT_NAME <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>environ[<span style="color:#e6db74">&#39;ENDPOINT_NAME&#39;</span>]
</span></span><span style="display:flex;"><span>TABLE_NAME <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>environ[<span style="color:#e6db74">&#39;DYNAMODB_TABLE&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lambda_handler</span>(event, context):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Parse input từ API Gateway</span>
</span></span><span style="display:flex;"><span>    body <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(event[<span style="color:#e6db74">&#39;body&#39;</span>])
</span></span><span style="display:flex;"><span>    input_data <span style="color:#f92672">=</span> body[<span style="color:#e6db74">&#39;input&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Gọi SageMaker endpoint</span>
</span></span><span style="display:flex;"><span>    start_time <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time()
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> sagemaker<span style="color:#f92672">.</span>invoke_endpoint(
</span></span><span style="display:flex;"><span>        EndpointName<span style="color:#f92672">=</span>ENDPOINT_NAME,
</span></span><span style="display:flex;"><span>        ContentType<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>        Body<span style="color:#f92672">=</span>json<span style="color:#f92672">.</span>dumps(input_data)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>    prediction <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(response[<span style="color:#e6db74">&#39;Body&#39;</span>]<span style="color:#f92672">.</span>read())
</span></span><span style="display:flex;"><span>    latency_ms <span style="color:#f92672">=</span> int((time<span style="color:#f92672">.</span>time() <span style="color:#f92672">-</span> start_time) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Ghi metadata vào DynamoDB</span>
</span></span><span style="display:flex;"><span>    request_id <span style="color:#f92672">=</span> str(uuid<span style="color:#f92672">.</span>uuid4())
</span></span><span style="display:flex;"><span>    timestamp <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>utcnow()<span style="color:#f92672">.</span>isoformat()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    dynamodb<span style="color:#f92672">.</span>put_item(
</span></span><span style="display:flex;"><span>        TableName<span style="color:#f92672">=</span>TABLE_NAME,
</span></span><span style="display:flex;"><span>        Item<span style="color:#f92672">=</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;requestId&#39;</span>: {<span style="color:#e6db74">&#39;S&#39;</span>: request_id},
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;timestamp&#39;</span>: {<span style="color:#e6db74">&#39;S&#39;</span>: timestamp},
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;modelName&#39;</span>: {<span style="color:#e6db74">&#39;S&#39;</span>: ENDPOINT_NAME},
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;inputData&#39;</span>: {<span style="color:#e6db74">&#39;S&#39;</span>: json<span style="color:#f92672">.</span>dumps(input_data)},
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;prediction&#39;</span>: {<span style="color:#e6db74">&#39;S&#39;</span>: json<span style="color:#f92672">.</span>dumps(prediction)},
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;latencyMs&#39;</span>: {<span style="color:#e6db74">&#39;N&#39;</span>: str(latency_ms)}
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Trả về kết quả inference</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;statusCode&#39;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;body&#39;</span>: json<span style="color:#f92672">.</span>dumps({
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;requestId&#39;</span>: request_id,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;prediction&#39;</span>: prediction,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;latencyMs&#39;</span>: latency_ms
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h4 id="-trong-đó">✅ Trong đó:</h4>
<ul>
<li>ENDPOINT_NAME: tên SageMaker Endpoint đã triển khai.</li>
<li>TABLE_NAME: tên bảng DynamoDB đã tạo ở 8.1.</li>
<li>latencyMs: thời gian inference, tính bằng mili-giây.</li>
</ul>
<ol start="3">
<li>Thêm biến môi trường cho Lambda</li>
</ol>
<ul>
<li>Trong trang cấu hình của Lambda → Configuration → Environment variables → Edit.</li>
<li>Thêm các biến:
<ul>
<li>ENDPOINT_NAME = tên SageMaker endpoint.</li>
<li>DYNAMODB_TABLE = InferenceMetadata.
<img src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/8-Configure-CloudFront/8.2-Update-Lambda-to-Write-DynamoDB/8.2.4.png" alt="lambda-dynamodb.png">
<img src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/8-Configure-CloudFront/8.2-Update-Lambda-to-Write-DynamoDB/8.2.5.png" alt="lambda-dynamodb.png"></li>
</ul>
</li>
</ul>
<ol start="4">
<li>Kiểm tra quyền truy cập IAM</li>
</ol>
<ul>
<li>Đảm bảo role Lambda có quyền ghi dữ liệu vào DynamoDB như sau:</li>
</ul>
<pre tabindex="0"><code>{
  &#34;Version&#34;: &#34;2012-10-17&#34;,
  &#34;Statement&#34;: [
    {
      &#34;Effect&#34;: &#34;Allow&#34;,
      &#34;Action&#34;: [
        &#34;dynamodb:PutItem&#34;,
        &#34;dynamodb:DescribeTable&#34;
      ],
      &#34;Resource&#34;: &#34;arn:aws:dynamodb:&lt;region&gt;:&lt;account-id&gt;:table/InferenceMetadata&#34;
    }
  ]
}
</code></pre><ol start="5">
<li>Triển khai và kiểm tra Lambda</li>
</ol>
<ul>
<li>Nhấn Deploy để lưu thay đổi.</li>
<li>Sử dụng Test trong Lambda Console hoặc gửi yêu cầu POST tới API Gateway như sau:</li>
</ul>
<pre tabindex="0"><code>curl -X POST \
  -H &#34;Content-Type: application/json&#34; \
  -d &#39;{&#34;input&#34;: {&#34;text&#34;: &#34;Hello AI!&#34;}}&#39; \
  https://&lt;api-id&gt;.execute-api.&lt;region&gt;.amazonaws.com/prod/inference
</code></pre><ul>
<li>Kiểm tra phản hồi chứa requestId, prediction, và latencyMs.
<img src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/8-Configure-CloudFront/8.2-Update-Lambda-to-Write-DynamoDB/8.2.6.png" alt="lambda-dynamodb.png"></li>
</ul>
<ol start="6">
<li>Xác minh dữ liệu trong DynamoDB</li>
</ol>
<ul>
<li>Mở bảng InferenceMetadata trong DynamoDB Console.</li>
<li>Chọn Explore table items để xem dữ liệu được ghi.
<img src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/images/8-Configure-CloudFront/8.2-Update-Lambda-to-Write-DynamoDB/8.2.7.png" alt="lambda-dynamodb.png">
Bạn sẽ thấy các bản ghi như sau:</li>
</ul>
<table>
  <thead>
      <tr>
          <th>requestId</th>
          <th>timestamp</th>
          <th>modelName</th>
          <th>inputData</th>
          <th>prediction</th>
          <th>latencyMs</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>6c1a4&hellip;</td>
          <td>2025-10-01T10:20:30Z</td>
          <td>ml-endpoint</td>
          <td>{&ldquo;text&rdquo;: &ldquo;Hello AI!&rdquo;}</td>
          <td>{&ldquo;result&rdquo;: &ldquo;positive&rdquo;}</td>
          <td>134</td>
          <td></td>
      </tr>
  </tbody>
</table>

<div class="notices warning" ><p>Nếu dữ liệu không được ghi, kiểm tra quyền IAM của Lambda.
Xác minh tên bảng DynamoDB và biến môi trường chính xác.
Xem log chi tiết trong CloudWatch Logs để debug lỗi.</p>
</div>

<h4 id="-hoàn-thành">✅ Hoàn thành</h4>
<ul>
<li>Bạn đã cập nhật Lambda để tự động ghi metadata mỗi lần inference vào DynamoDB.</li>
<li>Đây là bước quan trọng để kết nối pipeline inference với hệ thống lưu trữ và giám sát.</li>
</ul>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/8.1-create-dynamodb-table/" title="Tạo bảng DynamoDB để lưu metadata inference"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/vi/8-integrate-dynamodb-and-cloudwatch/8.3-monitor-with-cloudwatch/" title="Giám sát với Amazon CloudWatch" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/clipboard.min.js?1761146003"></script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/perfect-scrollbar.min.js?1761146003"></script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/perfect-scrollbar.jquery.min.js?1761146003"></script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/jquery.sticky.js?1761146003"></script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/featherlight.min.js?1761146003"></script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/highlight.pack.js?1761146003"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/modernizr.custom-3.6.0.js?1761146003"></script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/learn.js?1761146003"></script>
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/js/hugo-learn.js?1761146003"></script>

    <link href="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/mermaid/mermaid.css?1761146003" rel="stylesheet" />
    <script src="https://baoanh020603.github.io/Workshop-Building-an-End-to-End-Machine-Learning-Pipeline-on-AWS/mermaid/mermaid.js?1761146003"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
